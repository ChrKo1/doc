<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>A quick introduction to FLR</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/yeti.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>


</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 45px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 50px;
  margin-top: -50px;
}

.section h2 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h3 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h4 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h5 {
  padding-top: 50px;
  margin-top: -50px;
}
.section h6 {
  padding-top: 50px;
  margin-top: -50px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->






<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="http://flr-project.org">
    <span class="fa fa-home"></span>
     
    FLR
  </a>
</li>
<li>
  <a href="index.html">
    <span class="fa fa-info"></span>
     
    Home
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Introduction
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="A.html">Page A</a>
    </li>
    <li>
      <a href="B.html">Page B</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Input
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="A.html">Page A</a>
    </li>
    <li>
      <a href="B.html">Page B</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Visualization
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="A.html">Page A</a>
    </li>
    <li>
      <a href="B.html">Page B</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Modelling
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="A.html">Page A</a>
    </li>
    <li>
      <a href="B.html">Page B</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    Advice
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="A.html">Page A</a>
    </li>
    <li>
      <a href="B.html">Page B</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fa fa-gear"></span>
     
    MSE
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="A.html">Page A</a>
    </li>
    <li>
      <a href="B.html">Page B</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://example.com">
    <span class="fa fa-question fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">A quick introduction to FLR</h1>
<h4 class="date"><em>08 March, 2017</em></h4>

</div>


<p>The Fisheries Library in R (FLR) is a collection of tools for quantitative fisheries science, developed in the R language, that facilitates the construction of bio-economic simulation models of fisheries systems.</p>
<p>FLR builds on the powerful R environment and syntax to create a <a href="https://en.wikipedia.org/wiki/Domain-specific_language">domain-specific language</a> for the quantitative analysis of the expected risks and effects of fisheries management decision. The classes and methods in FLR consider uncertainty an integral part of our knowledge of fisheries system. […]</p>
<div id="required-packages" class="section level2">
<h2>Required packages</h2>
<p>To follow this tutorial you should have installed the following packages:</p>
<ul>
<li>FLR: <a href="http://www.flr-project.org/FLCore/">FLCore</a></li>
</ul>
<p>You can do so as follows,</p>
<pre class="r"><code>install.packages(c(&quot;FLCore&quot;), repos=&quot;http://flr-project.org/R&quot;)</code></pre>
</div>
<div id="starting-with-flr" class="section level1">
<h1>Starting with FLR</h1>
<p>The main <em>classes</em> (i.e. data structures) and methods (i.e. procedures) in the FLR system are found in the <code>FLCore</code> package. Let’s load it first</p>
<pre class="r"><code>library(FLCore)</code></pre>
<div id="the-flquant-class" class="section level2">
<h2>The <code>FLQuant</code> class</h2>
<p>The basic element on which the FLR classes are based is the <code>FLQuant</code> class. We can look at the structure of the class in its help page</p>
<pre class="r"><code>help(FLQuant)</code></pre>
<p>It is a six-dimensional array, in which the first dimension is free to have any name, <em>quant</em> by default, commonly <code>age</code>, while the other five have set names:</p>
<ul>
<li><code>year</code>: year of the data point.</li>
<li><code>unit</code>: any subdivision of the data not based on space or time, for example gender (<code>male</code> and <code>female</code>).</li>
<li><code>season</code>: any time step shorter than year (e.g. month, quarter, week).</li>
<li><code>area</code>: spatial subdivision of data</li>
<li><code>iter</code>: multiple iterations of the same process (e.g. bootstrap, Bayesian, Monte Carlo, …)</li>
</ul>
<p>We can now call the <code>FLQuant()</code> constructor method to see an example with some random numbers</p>
<pre class="r"><code>FLQuant(rlnorm(20), dim=c(4,5), quant=&quot;age&quot;, units=&quot;kg&quot;)</code></pre>
<pre><code>An object of class &quot;FLQuant&quot;
An object of class &quot;FLQuant&quot;
, , unit = unique, season = all, area = unique

   year
age 1       2       3       4       5      
  1 0.60352 0.97440 0.99065 1.68515 1.36443
  2 1.93833 2.09946 3.13919 0.84972 0.53418
  3 0.24826 1.51710 5.28007 0.61229 0.59522
  4 3.14748 6.16351 1.06234 0.93561 1.43151

units:  kg </code></pre>
<p>and this produces an <code>FLQuant</code> object with some numbers for ages 1 to 4, and years 1 to 5. The name of the first dimension has been specified to be “age”, while the units of measurement, “kg”, have been stored as an attribute to the array.</p>
<p>An important part of the information associated with any dataset is kept in an <code>FLQuant</code> as the <code>dimnames</code> of the array. For example, we can specify in the constructor call the names of any of the dimensions, by using the <code>dimnames</code> argument</p>
<pre class="r"><code>FLQuant(rlnorm(20), units=&quot;kg&quot;,
  dimnames=list(age=0:3, year=2010:2014))</code></pre>
<pre><code>An object of class &quot;FLQuant&quot;
An object of class &quot;FLQuant&quot;
, , unit = unique, season = all, area = unique

   year
age 2010     2011     2012     2013     2014    
  0  5.05653  0.15654  0.69089  1.00484  0.59178
  1  0.69980  4.84358  2.49983  2.98628 18.75915
  2  1.19544  3.67105  0.28047  3.45236  0.35310
  3  0.81529  0.88436  0.41125  2.65102  0.43105

units:  kg </code></pre>
<p>There are a number of methods and ways to create <code>FLQuant</code> objects from different R objects (<code>vector</code>, <code>matrix</code>, <code>array</code> or <code>data.frame</code>) once loaded into R, please see <code>?FLQuant</code> and <code>?as.FLQuant</code> for a complete list of available methods.</p>
<p>Objects of this class have the same properties as any <code>array</code> in R, with some important differences. For example, subsetting on an <code>FLQuant</code> does not drop by default unused dimensions</p>
<pre class="r"><code>flq &lt;- FLQuant(rlnorm(20), units=&quot;kg&quot;,
  dimnames=list(age=0:3, year=2010:2014))

flq[1,]</code></pre>
<pre><code>An object of class &quot;FLQuant&quot;
An object of class &quot;FLQuant&quot;
, , unit = unique, season = all, area = unique

   year
age 2010    2011    2012    2013    2014   
  0 0.83273 0.93033 0.57937 0.53811 0.66576

units:  kg </code></pre>
<pre class="r"><code>dim(flq[1,])</code></pre>
<pre><code>[1] 1 5 1 1 1 1</code></pre>
<p>so they remain valid <code>FLQuant</code> objects. Similarly, arithmetic operations on objects of the class, against each other or against numeric vectors, always return an <code>FLQuant</code> object.</p>
<pre class="r"><code>flq * 2</code></pre>
<pre><code>An object of class &quot;FLQuant&quot;
An object of class &quot;FLQuant&quot;
, , unit = unique, season = all, area = unique

   year
age 2010    2011    2012    2013    2014   
  0 1.66546 1.86067 1.15873 1.07622 1.33152
  1 1.74553 1.58617 1.13461 2.58775 2.61444
  2 0.95651 1.61724 0.91591 1.52422 0.46513
  3 4.02794 4.84576 1.19348 0.76540 1.54251

units:  kg </code></pre>
<pre class="r"><code>flq + (flq * 2)</code></pre>
<pre><code>An object of class &quot;FLQuant&quot;
An object of class &quot;FLQuant&quot;
, , unit = unique, season = all, area = unique

   year
age 2010   2011   2012   2013   2014  
  0 2.4982 2.7910 1.7381 1.6143 1.9973
  1 2.6183 2.3793 1.7019 3.8816 3.9217
  2 1.4348 2.4259 1.3739 2.2863 0.6977
  3 6.0419 7.2686 1.7902 1.1481 2.3138

units:  kg </code></pre>
<ul>
<li>summary, plot</li>
</ul>
<pre class="r"><code>plot(FLQuant(rnorm(200), dim=c(2,20)))</code></pre>
<p><img src="An_overview_of_the_FLCore_classes_files/figure-html/plotFLQuant-1.png" width="672" style="display: block; margin: auto;" /></p>
<ul>
<li>FLStock</li>
</ul>
</div>
<div id="flpar" class="section level2">
<h2>FLPar</h2>
</div>
<div id="flsr" class="section level2">
<h2>FLSR</h2>
</div>
</div>
<div id="references" class="section level1">
<h1>References</h1>
<p>L. T. Kell, I. Mosqueira, P. Grosjean, J-M. Fromentin, D. Garcia, R. Hillary, E. Jardim, S. Mardle, M. A. Pastoors, J. J. Poos, F. Scott, R. D. Scott; FLR: an open-source framework for the evaluation and development of management strategies. <em>ICES J Mar Sci</em> 2007; 64 (4): 640-646. doi: <a href="https://doi.org/10.1093/icesjms/fsm012">10.1093/icesjms/fsm012</a></p>
</div>
<div id="more-information" class="section level1">
<h1>More information</h1>
<ul>
<li>You can submit bug reports, questions or suggestions on this tutorial at <a href="https://github.com/flr/doc/issues" class="uri">https://github.com/flr/doc/issues</a>.</li>
<li>Or send a pull request to <a href="https://github.com/flr/doc/" class="uri">https://github.com/flr/doc/</a></li>
<li>For more information on the FLR Project for Quantitative Fisheries Science in R, visit the FLR webpage, <a href="http://flr-project.org" class="uri">http://flr-project.org</a>.</li>
</ul>
<div id="software-versions" class="section level2">
<h2>Software Versions</h2>
<ul>
<li>R version 3.3.2 (2016-10-31)</li>
<li>FLCore: 2.6.0.20170228</li>
<li><strong>Compiled</strong>: Wed Mar 8 10:55:58 2017</li>
</ul>
</div>
<div id="license" class="section level2">
<h2>License</h2>
<p>This document is licensed under the <a href="https://creativecommons.org/licenses/by-sa/4.0">Creative Commons Attribution-ShareAlike 4.0 International</a> license.</p>
</div>
<div id="author-information" class="section level2">
<h2>Author information</h2>
<p><strong>Iago MOSQUEIRA</strong>. European Commission, DG Joint Research Centre, Directorate D - Sustainable Resources, Unit D.02 Water and Marine Resources, Via E. Fermi 2749, 21027 Ispra VA, Italy. <a href="https://ec.europa.eu/jrc/" class="uri">https://ec.europa.eu/jrc/</a></p>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
